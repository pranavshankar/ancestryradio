(function(a){a.fn.shiningImage=function(c){c=a.extend({color:"#0066FF",delay:2000,direction:"z",opacity:0.5,scale:0.5,speed:70},c);function b(){var d;var n=0;var m=0;var l=0;var i=true;if(q){var j=a(this);var e=j.width();var r=j.height();var t;var o;var k;var g;var p;o=a('<canvas width="'+e+'" height="'+r+'"></canvas>');o.attr("class",j.attr("class"));o.attr("style",j.attr("style"));o.attr("id",j.attr("id"));j.attr("id",j.attr("id")+"_");j.after(o);j.hide();t=o.get(0).getContext("2d");g=new Image();g.onload=function(){s()};g.src=j.attr("src");o.click(function(){j.trigger("click")});o.mouseover(function(){j.trigger("mouseover")});o.mouseout(function(){j.trigger("mouseout")});o.mouseup(function(){j.trigger("mouseup")});o.mousedown(function(){j.trigger("mousedown")})}function s(){n+=c.scale/3;m+=c.scale/3;l+=c.scale/3;if(c.direction=="x"){grad=t.createLinearGradient(0,0,e,0)}else{if(c.direction=="y"){grad=t.createLinearGradient(0,0,0,r)}else{if(c.direction=="-x"){grad=t.createLinearGradient(e,0,0,0)}else{grad=t.createLinearGradient(0,r,e,0)}}}if((n==c.scale/3)&&(m==c.scale/3)&&(l==c.scale/3)){n=0;l=(c.scale/3)*2}else{if((n==c.scale/3)&&(m==c.scale/3)){m=(c.scale/3)*2}}if(l>1){l=1}if(m>1){m=1}if(n>1){i=false;d=setTimeout(function(){i=true;s()},c.delay)}if(i){grad.addColorStop(n,"rgba("+h(c.color)+",0)");grad.addColorStop(m,"rgba("+h(c.color)+",1)");grad.addColorStop(l,"rgba("+h(c.color)+",0)")}else{n=0;m=0;l=0;grad.addColorStop(n,"rgba("+h(c.color)+",0)");grad.addColorStop(m,"rgba("+h(c.color)+",0)");grad.addColorStop(l,"rgba("+h(c.color)+",0)")}t.clearRect(0,0,e,r);t.globalCompositeOperation="source-over";t.globalAlpha=1;t.drawImage(g,0,0,e,r);t.globalAlpha=c.opacity;t.globalCompositeOperation="source-atop";t.fillStyle=grad;t.fillRect(0,0,e,r);t.globalAlpha=1;if(i){d=setTimeout(s,c.speed)}}function f(u){return(u.charAt(0)=="#")?u.substring(1,7):u}function h(v){var u=parseInt((f(v)).substring(0,2),16);u+=","+parseInt((f(v)).substring(2,4),16);u+=","+parseInt((f(v)).substring(4,6),16);return u}function q(){var u=document.createElement("canvas");return !!(u.getContext&&u.getContext("2d"))}}a(this).each(b);return a(this)}})(jQuery);